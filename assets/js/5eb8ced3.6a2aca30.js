"use strict";(self.webpackChunk_agoralabs_sh_avm_web_provider=self.webpackChunk_agoralabs_sh_avm_web_provider||[]).push([[944],{2520:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>p,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>v});var s=r(7624),i=r(2172),a=r(1268),t=r(5388),o=r(1552);const d={},p="Responding To Enable Requests",l={id:"providers/responding-to-enable-requests",title:"Responding To Enable Requests",description:"<TOCInline",source:"@site/docs/providers/responding-to-enable-requests.mdx",sourceDirName:"providers",slug:"/providers/responding-to-enable-requests",permalink:"/providers/responding-to-enable-requests",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Responding To Discover Requests",permalink:"/providers/responding-to-discover-requests"},next:{title:"Responding To Disable Requests",permalink:"/providers/responding-to-disable-requests"}},c={},v=[{value:"Overview",id:"overview",level:2},{value:"Responding to an anonymous request",id:"responding-to-an-anonymous-request",level:2},{value:"Responding to a specific provider request",id:"responding-to-a-specific-provider-request",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"responding-to-enable-requests",children:"Responding To Enable Requests"}),"\n",(0,s.jsx)(o.c,{maxHeadingLevel:4,toc:v}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The main purpose of an enable request to is for clients to get a list of authorized accounts. However, it can be used to handle sessioning. While it is not enforced through this SDK, it is heavily recommended."}),"\n",(0,s.jsx)(n.h2,{id:"responding-to-an-anonymous-request",children:"Responding to an anonymous request"}),"\n",(0,s.jsx)(n.p,{children:"For clients that have not specified a provider, it means the client would like to enable with all providers. Once our provider object has been initialized, we can simply listen to events and respond:"}),"\n",(0,s.jsxs)(a.c,{defaultValue:"javascript",values:[{label:"Javascript",value:"javascript"},{label:"TypeScript",value:"typescript"}],children:[(0,s.jsx)(t.c,{value:"javascript",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// initialized provider\nprovider.onEnable(({ params }) => {\n  if (!params || !params.providerId) {\n    return {\n      accounts: [\n        {\n          address: 'P3AIQVDJ2CTH54KSJE63YWB7IZGS4W4JGC53I6GK72BGZ5BXO2B2PS4M4U',\n          name: 'Wallet-1',\n        },\n        {\n          address: '6GT6EXFDAHZDZYUOPT725ZRWYBZDCEGYT7SYYXGJKRFUAG5B7JMI7DQRNQ',\n          name: 'Wallet-2',\n        },\n      ],\n      genesisHash: 'SGO1GKSzyE7IEPItTxCByw9x8FmnrCDexi9/cOUJOiI=',\n      genesisId: 'testnet-v1.0',\n      providerId: '02657eaf-be17-4efc-b0a4-19d654b2448e',\n    };\n  }\n});\n"})})}),(0,s.jsx)(t.c,{value:"typescript",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import type { IAVMWebProviderListenerOptions } from '@agoralabs-sh/avm-web-provider';\n\n// initialized provider\nprovider.onEnable(({ params }: IAVMWebProviderListenerOptions) => {\n  if (!params || !params.providerId) {\n    return {\n      accounts: [\n        {\n          address: 'P3AIQVDJ2CTH54KSJE63YWB7IZGS4W4JGC53I6GK72BGZ5BXO2B2PS4M4U',\n          name: 'Wallet-1',\n        },\n        {\n          address: '6GT6EXFDAHZDZYUOPT725ZRWYBZDCEGYT7SYYXGJKRFUAG5B7JMI7DQRNQ',\n          name: 'Wallet-2',\n        },\n      ],\n      genesisHash: 'SGO1GKSzyE7IEPItTxCByw9x8FmnrCDexi9/cOUJOiI=',\n      genesisId: 'testnet-v1.0',\n      providerId: '02657eaf-be17-4efc-b0a4-19d654b2448e',\n    };\n  }\n});\n"})})})]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["If this method is not supported, then a ",(0,s.jsx)(n.a,{href:"../../api-reference/errors#methodnotsupportederror",children:(0,s.jsx)(n.code,{children:"MethodNotSupportedError"})})," should be thrown."]})}),"\n",(0,s.jsx)(n.h2,{id:"responding-to-a-specific-provider-request",children:"Responding to a specific provider request"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"enable"})," request allows the client to specify the provider. This is denoted in the supplied ",(0,s.jsx)(n.code,{children:"params.providerId"})," parameter. Providers with the matching ID should respond:"]}),"\n",(0,s.jsxs)(a.c,{defaultValue:"javascript",values:[{label:"Javascript",value:"javascript"},{label:"TypeScript",value:"typescript"}],children:[(0,s.jsx)(t.c,{value:"javascript",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const providerId = '02657eaf-be17-4efc-b0a4-19d654b2448e';\n\n// initialized provider\nprovider.onEnable(({ params }) => {\n  if (!params || params.providerId === providerId) {\n    return {\n      accounts: [\n        {\n          address: 'P3AIQVDJ2CTH54KSJE63YWB7IZGS4W4JGC53I6GK72BGZ5BXO2B2PS4M4U',\n          name: 'Wallet-1',\n        },\n        {\n          address: '6GT6EXFDAHZDZYUOPT725ZRWYBZDCEGYT7SYYXGJKRFUAG5B7JMI7DQRNQ',\n          name: 'Wallet-2',\n        },\n      ],\n      genesisHash: 'SGO1GKSzyE7IEPItTxCByw9x8FmnrCDexi9/cOUJOiI=',\n      genesisId: 'testnet-v1.0',\n      providerId,\n    };\n  }\n});\n"})})}),(0,s.jsx)(t.c,{value:"typescript",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import type { IAVMWebProviderListenerOptions } from '@agoralabs-sh/avm-web-provider';\n\nconst providerId: string = '02657eaf-be17-4efc-b0a4-19d654b2448e';\n\n// initialized provider\nprovider.onEnable(({ params }: IAVMWebProviderListenerOptions) => {\n  if (!params || params.providerId === providerId) {\n    return {\n      accounts: [\n        {\n          address: 'P3AIQVDJ2CTH54KSJE63YWB7IZGS4W4JGC53I6GK72BGZ5BXO2B2PS4M4U',\n          name: 'Wallet-1',\n        },\n        {\n          address: '6GT6EXFDAHZDZYUOPT725ZRWYBZDCEGYT7SYYXGJKRFUAG5B7JMI7DQRNQ',\n          name: 'Wallet-2',\n        },\n      ],\n      genesisHash: 'SGO1GKSzyE7IEPItTxCByw9x8FmnrCDexi9/cOUJOiI=',\n      genesisId: 'testnet-v1.0',\n      providerId,\n    };\n  }\n});\n"})})})]})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);