"use strict";(self.webpackChunk_agoralabs_sh_avm_web_provider=self.webpackChunk_agoralabs_sh_avm_web_provider||[]).push([[8045],{4558:function(e,n,s){s.r(n),s.d(n,{assets:function(){return g},contentTitle:function(){return p},default:function(){return l},frontMatter:function(){return d},metadata:function(){return c},toc:function(){return u}});var r=s(4848),i=s(8453),t=s(1470),a=s(9365),o=s(4252);const d={},p="Responding To Sign Message Requests",c={id:"providers/responding-to-sign-message-requests",title:"Responding To Sign Message Requests",description:"<TOCInline",source:"@site/docs/providers/responding-to-sign-message-requests.mdx",sourceDirName:"providers",slug:"/providers/responding-to-sign-message-requests",permalink:"/providers/responding-to-sign-message-requests",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Responding To Sign And Post Transactions Requests",permalink:"/providers/responding-to-sign-and-post-transactions-requests"},next:{title:"Throwing An Error",permalink:"/providers/throwing-an-error"}},g={},u=[{value:"Responding to a sign message request",id:"responding-to-a-sign-message-request",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"responding-to-sign-message-requests",children:"Responding To Sign Message Requests"})}),"\n",(0,r.jsx)(o.A,{maxHeadingLevel:4,toc:u}),"\n",(0,r.jsx)(n.h2,{id:"responding-to-a-sign-message-request",children:"Responding to a sign message request"}),"\n",(0,r.jsx)(n.p,{children:"Once our provider object has been initialized, we can simply listen to events and respond:"}),"\n",(0,r.jsxs)(t.A,{defaultValue:"javascript",values:[{label:"Javascript",value:"javascript"},{label:"TypeScript",value:"typescript"}],children:[(0,r.jsx)(a.A,{value:"javascript",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const providerId = '02657eaf-be17-4efc-b0a4-19d654b2448e';\n\n// initialized provider\nprovider.onSignMessage(({ params }) => {\n  // ... using the `params.message` and the `params.signer` parameters, the provider signs the message with the private key of the signer and, with the signature, encodes as a base64 string\n\n  return {\n    providerId,\n    signature:  'gqNzaWfEQ...', // base64 encoded signature\n    signer: 'P3AIQVDJ2CTH54KSJE63YWB7IZGS4W4JGC53I6GK72BGZ5BXO2B2PS4M4U',\n  };\n});\n"})})}),(0,r.jsx)(a.A,{value:"typescript",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import type { IAVMWebProviderCallbackOptions } from '@agoralabs-sh/avm-web-provider';\n\nconst providerId = '02657eaf-be17-4efc-b0a4-19d654b2448e';\n\n// initialized provider\nprovider.onSignMessage(({ params }: IAVMWebProviderCallbackOptions) => {\n  // ... using the `params.message` and the `params.signer` parameters, the provider signs the message with the private key of the signer and, with the signature, encodes as a base64 string\n\n  return {\n    providerId,\n    signature:  'gqNzaWfEQ...', // base64 encoded signature\n    signer: 'P3AIQVDJ2CTH54KSJE63YWB7IZGS4W4JGC53I6GK72BGZ5BXO2B2PS4M4U',\n  };\n});\n"})})})]}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["If this method is not supported, then a ",(0,r.jsx)(n.a,{href:"../../api-reference/errors#methodnotsupportederror",children:(0,r.jsx)(n.code,{children:"MethodNotSupportedError"})})," should be thrown."]})}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["If the signer, supplied in the ",(0,r.jsx)(n.code,{children:"params"}),", is not known, or not authorized, a ",(0,r.jsx)(n.a,{href:"../../api-reference/errors#unauthorizedsignererror",children:(0,r.jsx)(n.code,{children:"UnauthorizedSignerError"})})," should be thrown."]})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);